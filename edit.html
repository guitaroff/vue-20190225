<html></<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Лекция №2</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style type="text/css">
      [v-cloak] {
        display:none;
      }
    </style>
  </head>
  <body>
    <div id="app" v-cloak>
      <p><a href="index.html">Вернуться на главную</a></p>
      <h2>Редактирование пользователя</h2>
      <pre>Данные наверху: {{ user }}</pre>
      <user-form v-if="user" v-bind:user="user" v-on:user="updateUser"></user-form>
    </div>

    <template id="user-form">
      <form>
        <div class="form-group">
          <label for="firstnameInput">Имя</label>
          <input
            type="text"
            v-model="user.firstname"
            class="form-control"
            id="firstnameInput"
            placeholder="Введите имя">
        </div>
        <div class="form-group">
          <label for="secondnameInput">Отчество</label>
          <input
            type="text"
            v-model="user.secondname"
            class="form-control"
            id="secondnameInput"
            placeholder="Введите отчество">
        </div>
        <div class="form-group">
          <label for="lastnameInput">Фамилия</label>
          <input
            type="text"
            v-model="user.lastname"
            class="form-control"
            id="lastnameInput"
            placeholder="Введите фамилию">
        </div>
        <button
          type="submit"
          v-on:click.prevent="updateUser"
          class="btn btn-primary">Submit</button>
      </form>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script type="text/javascript">
      Vue.config.devtools = true;
      var userForm = {
        template: '#user-form',
        props: {
          user: {
            type: Object,
            required: true
          }
        },
        methods: {
          updateUser: function () {
            console.log('user', this.user)
            this.$emit('user', this.user)
          }
        }
      }
      window.app = new Vue({
        el: '#app',
        components: {
          'user-form': userForm
        },
        data: function() {
          return {
            user: null
          }
        },
        mounted: function () {
          this.user = {'id': 1,'firstname': 'Владлена', 'secondname': 'Семеновна', 'lastname': 'Александрова', 'avatar': null}
        },
        methods: {
          updateUser: function (user) {
            console.log('PARENT', user)
            this.user = user
          }
        }
      })
    </script>
  </body>
</html>
